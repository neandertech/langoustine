<!DOCTYPE html><html data-githubContributorsUrl="https://api.github.com/repos/neandertech/langoustine" data-githubContributorsFilename="docs/_docs/tracer.md" data-pathToRoot="" data-rawLocation="tracer" data-dynamicSideMenu="false"><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"></meta><title>Tracer</title><link rel="shortcut icon" type="image/x-icon" href="favicon.ico"></link><script type="text/javascript" src="scripts/theme.js"></script><script type="text/javascript" src="scripts/searchData.js" defer="true"></script><script type="text/javascript" src="scripts/scastieConfiguration.js" defer="true"></script><link rel="stylesheet" href="styles/theme/bundle.css"></link><link rel="stylesheet" href="styles/theme/components/bundle.css"></link><link rel="stylesheet" href="styles/theme/components/button/bundle.css"></link><link rel="stylesheet" href="styles/theme/layout/bundle.css"></link><link rel="stylesheet" href="styles/nord-light.css"></link><link rel="stylesheet" href="styles/dotty-icons.css"></link><link rel="stylesheet" href="styles/filter-bar.css"></link><link rel="stylesheet" href="styles/code-snippets.css"></link><link rel="stylesheet" href="styles/searchbar.css"></link><link rel="stylesheet" href="styles/social-links.css"></link><link rel="stylesheet" href="styles/versions-dropdown.css"></link><link rel="stylesheet" href="styles/content-contributors.css"></link><link rel="stylesheet" href="styles/fontawesome.css"></link><script type="text/javascript" src="hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="scripts/ux.js" defer="true"></script><script type="text/javascript" src="scripts/common/component.js" defer="true"></script><script type="text/javascript" src="scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="scripts/scaladoc-scalajs.js" defer="true"></script><script type="text/javascript" src="scripts/contributors.js" defer="true"></script><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="https://scastie.scala-lang.org/embedded.js" defer="true"></script><script type="text/javascript" src="scripts/data.js" defer="true"></script><link rel="stylesheet" href="styles/staticsitestyles.css"></link><script>var pathToRoot = "";</script></head><body><div id=""><div id="header" class="body-small"><div class="header-container-left"><a href="" class="logo-container"><span class="project-name h300">Langoustine</span></a><span onclick="dropdownHandler(event)" class="text-button with-arrow" id="dropdown-trigger"><a><div class="projectVersion">0.0.22+4-ca8d5f6b-SNAPSHOT</div></a></span><div id="version-dropdown" class="dropdown-menu"></div></div><div class="header-container-right"><button id="search-toggle" class="icon-button"></button><span id="theme-toggle" class="icon-button"></span><span id="mobile-menu-toggle" class="icon-button hamburger"></span></div></div><div id="mobile-menu"><div class="mobile-menu-header body-small"><span class="mobile-menu-logo"><span class="project-name h300">Langoustine</span></span><button id="mobile-menu-close" class="icon-button close"></button></div><div class="mobile-menu-container body-medium"><input id="mobile-scaladoc-searchbar-input" class="scaladoc-searchbar-input" type="search" placeholder="Find anything"></input><span id="mobile-theme-toggle" class="mobile-menu-item mode"></span></div></div><span id="mobile-sidebar-toggle" class="floating-button"></span><div id="leftColumn" class="body-small"><div class="switcher-container"><a id="docs-nav-button" class="switcher h100 selected" href="index.html">Docs</a><a id="api-nav-button" class="switcher h100 " href="api/index.html">API</a></div><nav id="docs-nav" class="side-menu"><div class="ni n0 "><span class="nh de"><a href="getting_started.html"><span>Getting started</span></a></span></div><div class="ni n0 expanded"><span class="nh h100 selected de"><a href="#"><span>Tracer</span></a></span></div><div class="ni n0 "><span class="nh de"><a href="toolkit.html"><span>LSP Toolkit</span></a></span></div><div class="ni n0 "><span class="nh de"><a href="examples.html"><span>Examples</span></a></span></div><div class="ni n0 "><span class="nh de"><a href="CONTRIBUTING.html"><span>Contributing guide</span></a></span></div></nav></div><div id="footer" class="body-small"><div class="left-container">Generated with</div><div class="right-container"><a href="https://github.com/neandertech/langoustine"><button class="icon-button gh"></button></a><div class="text">Copyright (c) 2022, Neandertech</div></div><div class="text-mobile">Copyright (c) 2022, Neandertech</div></div><div id="scaladoc-searchBar"></div><div id="main"><div class="breadcrumbs container"><a href="index.html">Langoustine</a>/<a href="tracer.html">Tracer</a></div><div id="content" class="body-medium"><div><section id="tracer-1">
 <h1 class="h500"><a href="#tracer-1" class="anchor"></a>Tracer</h1>
 <p><img src="https://user-images.githubusercontent.com/1052965/187040059-f6e0c08b-7c76-4899-b370-0e8ada0c4819.gif" alt="2022-08-27 17 50 05"></p>
 <p>A UI tool for capturing the LSP requests and responses that are exchanged between the client and the server.</p>
 <p>It doesn't matter what the target LSP is implemented with, as we only intercept JSONRPC payloads sent to stdin and stdout.</p>
 <p>Currently, primary method of distribution is via <a href="https://get-coursier.io/docs/overview">Coursier</a>.</p>
 <p>To integrate with an LSP of your choosing, you need to have access to the CLI command that launches it.</p>
 <p>The principle remains the same regardless of the editor:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>cs launch tech.neander:langoustine-tracer_3:latest.release -- &lt;lsp command&gt;
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>where <code>&lt;lsp command&gt;</code> is passed as a list of arguments, <strong>not as a string</strong>.</p>
 <p>Once the tracer is launched, it'll bind itself to a random port (see below if you'd like to make it non-random) and send a message to the LSP client with the port bound. You can then reach the UI by going to <code>localhost:&lt;port bound&gt;</code> in your browser.</p>
</section>
<section id="packaging-with-coursier-1">
 <h3 class="h400"><a href="#packaging-with-coursier-1" class="anchor"></a>Packaging with coursier</h3>
 <p>You can make your life considerably easier by using the bootstrap command that Coursier provides:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>cs bootstrap tech.neander:langoustine-tracer_3:latest.release -f -o langoustine-tracer
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span># now you can use ./langoustine-tracer,
</span><span line-number="4" class=""><span class="tooltip-container"></span># put it somewhere on your PATH so that it's globally avalable
</span><span line-number="5" class=""><span class="tooltip-container"></span># and use it like this:
</span><span line-number="6" class=""><span class="tooltip-container"></span>langoustine-tracer my-awesome lsp --stdin true
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Alternatively, if your system was setup with coursier (i.e. the path where it puts installed applications is in your system's <code>PATH</code>), then life is even easier, hedonistic even:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>cs install tech.neander:langoustine-tracer_3:latest.release
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p><strong>From this point in the document we assume that you somehow installed this app in a global location</strong></p>
 <p>For example, if your command to launch the LSP is <code>my-awesome lsp --stdin true</code>, then to trace it you need to use the following command:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>langoustine-tracer my-awesome lsp --stdin true
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="tips-1">
 <h2 class="h500"><a href="#tips-1" class="anchor"></a>Tips</h2>
</section>
<section id="changing-port-1">
 <h3 class="h400"><a href="#changing-port-1" class="anchor"></a>Changing port</h3>
 <p>By default, it will start the server at random port, but you can change that using the <code>--port</code> argument:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>langoustine-tracer --port 9911 my-awesome lsp --stdin true
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="changing-host-1">
 <h3 class="h400"><a href="#changing-host-1" class="anchor"></a>Changing host</h3>
 <p>By default, tracer will bind to <code>localhost</code>. On some systems this may cause issues, for example under WSL on Windows.</p>
 <p>In this scenario you might want to change the host to <code>0.0.0.0</code> with the <code>--host</code> parameter:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>langoustine-tracer --host 0.0.0.0 my-awesome lsp --stdin true
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="local-development-1">
 <h3 class="h400"><a href="#local-development-1" class="anchor"></a>Local development</h3>
 <p>If you are working on the tracer itself, you can globally alias <code>langoustine-tracer</code> to a local installation:</p>
 <div class="snippet mono-small-block">
  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>alias langoustine-tracer=&lt;path-to-langoustine&gt;/modules/tracer/backend/target/jvm-3/universal/stage/bin/langoustine-tracer
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>That launcher is created by running <code>sbt tracer/stage</code></p>
 <p>If your focus is on the frontend, you can speed up your development cycle considerably by doing the following:</p>
 <ol>
  <li>Start your traced LSP somehow (doesn't matter if it's a coursier-installed one or your local)</li>
  <li>Take note of the port number</li>
  <li><code>cd modules/tracer/frontend</code></li>
  <li><code>LANGOUSTINE_PORT=&lt;port&gt; npm run dev</code></li>
  <li>In a separate terminal, run <code>sbt ~tracerFrontendJS/fastLinkJS</code></li>
 </ol>
 <p>Now you can edit just the frontend code and Vite will automatically refresh the page - no need to restart the LSP to pick up changes.</p>
</section></div><div id="toc" class="body-small"><div id="toc-container"><span class="toc-title h200">In this article</span><nav class="toc-nav"><ul class="toc-list"><li><a href="#tracer-1">Tracer</a><ul><li><ul><li><a href="#packaging-with-coursier-1">Packaging with coursier</a></li></ul></li><li><a href="#tips-1">Tips</a><ul><li><a href="#changing-port-1">Changing port</a></li><li><a href="#changing-host-1">Changing host</a></li><li><a href="#local-development-1">Local development</a></li></ul></li></ul></li></ul></nav></div></div></div><div id="footer" class="body-small mobile-footer"><div class="left-container">Generated with</div><div class="right-container"><a href="https://github.com/neandertech/langoustine"><button class="icon-button gh"></button></a><div class="text">Copyright (c) 2022, Neandertech</div></div><div class="text-mobile">Copyright (c) 2022, Neandertech</div></div></div></div></body></html>